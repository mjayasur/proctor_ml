<!DOCTYPE html>
<html>
    <head>
        
    </head>
    <body>
        <video width="320" height="240" id="videoInput"></video>
        <canvas width="320" height="240" id="canvasOutput"></canvas>
    </body>

    <script async onload="onOpenCvReady();" src="https://docs.opencv.org/3.4/opencv.js" type="text/javascript"></script>
    <script>
      var Module = {
         wasmBinaryFile: 'https://huningxin.github.io/opencv.js/build/wasm/opencv_js.wasm',
        preRun: [function() {
          Module.FS_createPreloadedFile('/', 'haarcascade_eye.xml', 'https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_eye.xml', true, false);
          Module.FS_createPreloadedFile('/', 'haarcascade_frontalface_default.xml', 'https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_frontalface_default.xml', true, false);
          Module.FS_createPreloadedFile('/', 'haarcascade_profileface.xml', 'https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_profileface.xml', true, false);
        }],
        _main: function() {opencvIsReady();}
      };
</script>
    <script>
        function onOpenCvReady() {
            cv['onRuntimeInitialized']=()=> {
            let video = document.getElementById("videoInput"); // video is the id of video tag
            navigator.mediaDevices.getUserMedia({ video: true, audio: false })
                .then(function(stream) {
                    video.srcObject = stream;
                    video.play();
                })
                .catch(function(err) {
                    console.log("An error occurred! " + err);
                });

        }
        

        
    </script>
</html>